<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>807é›…æ€è¯æ±‡</title>
  <style>
    body {
      background-color: #D6E5D1; /* æ·¡ç»¿èƒŒæ™¯ */
      font-family: Arial, sans-serif;
      margin: 20px;
      text-align: center;
      color: #3E2723;
    }
    h2 {
      margin-top: 40px;
    }
    .grid {
      display: grid;
      gap: 10px;
      margin: 20px auto;
    }
    /* å­¦ä¹ æ¨¡å¼ï¼š4âœ–ï¸4 ç½‘æ ¼ */
    #learn-grid {
      grid-template-columns: repeat(4, 1fr);
      max-width: 600px;
    }
    .card {
      border: 1px solid #F5ECD9;
      border-radius: 5px;
      padding: 10px;
      background: #FFFDE7;
      cursor: pointer;
      user-select: none;
      transition: border 0.3s;
    }
    /* é€‰ä¸­æ—¶æ·»åŠ é«˜äº®è¾¹æ¡† */
    .selected-card {
      border-color: #FCD5B4;
      background: #FFE8D6;
    }
    /* æ¶ˆæ¶ˆä¹ï¼š4âœ–ï¸8 ç½‘æ ¼ */
    #game-grid {
      grid-template-columns: repeat(4, 1fr);
      max-width: 600px;
      min-height: 300px;
    }
    /* åŒ¹é…æˆåŠŸåéšè—ï¼Œä½†ä¿æŒä½ç½® */
    .matched {
      visibility: hidden;
      pointer-events: none;
    }
    .hidden {
      display: none;
    }
    button {
      margin: 10px 5px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
      background-color: #FFE8D6;
      border: black;
      border-radius: 5px;
    }
    button:hover {
      background: #FCD5B4;
       }
    .error-summary {
      border: 1px solid #F5ECD9;
      background-color: #FFFDE7;
      padding: 10px;
      margin: 10px auto;
      max-width: 600px;
      text-align: left;
    }
    /* æ‹¼æ‹¼ä¹æ ·å¼ */
    #puzzle-area {
      margin: 20px auto;
      max-width: 600px;
      text-align: center;
    }
    .puzzle-parts {
      margin: 10px;
    }
    .puzzle-part {
      display: inline-block;
      border: 1px solid #333;
      padding: 5px 10px;
      margin: 5px;
      background: #FFE8D6;
      cursor: pointer;
      font-size: 15px;
    }
    .selected-part {
      background: #FFE8D6;
      border-color: #0c5460;
      cursor: default;
    }
    #puzzle-message {
      margin-top: 10px;
      font-size: 16px;
    }
    #puzzle-counter {
      margin-top: 10px;
      font-size: 16px;
    }
    /* å•è¯å¬å¬ä¹æ ·å¼ */
    #listening-area {
      margin: 20px auto;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    #listening-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    #options-area {
      margin-top: 10px;
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      width: 100%;
    }
    .option-btn {
      padding: 8px 12px;
      cursor: pointer;
      font-size: 15px;
    }
    .speaker {
      font-size: 24px;
      cursor: pointer;
      margin-bottom: 5px;
    }
    #listening-counter {
      font-size: 16px;
    }
    .hidden-word {
      color: transparent;
      font-size: 18px;
    }
  </style>
</head>
<body>

  <!-- å­¦ä¹ æ¨¡å¼ -->
  <section id="learning-mode">
    <h2>å­¦ä¹ æ¨¡å¼</h2>
    <div id="learn-controls">
      <button id="refresh-btn">åˆ·æ–°å•è¯</button>
      <button id="start-game-btn">å¼€å§‹æ¸¸æˆ</button>
      <!-- å·²ç§»é™¤â€œç»§ç»­æ¸¸æˆâ€æŒ‰é’® -->
    </div>
    <div id="learn-grid" class="grid">
      <!-- 16å¼ å•è¯å¡ç‰‡é€šè¿‡JSå¡«å…… -->
    </div>
  </section>

  <!-- å•è¯æ¶ˆæ¶ˆä¹ -->
  <section id="game-mode" class="hidden">
    <h2>å•è¯æ¶ˆæ¶ˆä¹</h2>
    <p id="game-instructions">è¯·å°†è‹±æ–‡å’Œä¸­æ–‡é…å¯¹</p>
    <div id="game-end-section" class="hidden">
      <div class="error-summary" id="game-error-summary">
        <strong>æ¶ˆæ¶ˆä¹é”™è¯¯å•è¯æ€»ç»“ï¼š</strong>
        <div id="game-errors"></div>
      </div>
      <div id="game-end-buttons">
        <button id="next-level-btn">è¿›å…¥ä¸‹ä¸€å…³</button>
      </div>
    </div>
    <div id="game-grid" class="grid"></div>
    <div id="game-controls">
  </section>

  <!-- å•è¯æ‹¼æ‹¼ä¹ -->
  <section id="puzzle-mode" class="hidden">
    <h2>å•è¯æ‹¼æ‹¼ä¹</h2>
    <div id="puzzle-area"></div>
    <div id="puzzle-message"></div>
    <div id="puzzle-counter">å·²ç»ƒä¹ å•è¯ï¼š0</div>
    <div id="puzzle-end-section" class="hidden">
      <div class="error-summary" id="puzzle-error-summary">
        <strong>æ‹¼æ‹¼ä¹é”™è¯¯å•è¯æ€»ç»“ï¼š</strong><br>
        <div id="puzzle-errors"></div>
      </div>
      <div id="puzzle-end-buttons">
        <button id="back-to-learn-btn3b">å¼€å¯æ–°ä¸€è½®æŒ‘æˆ˜</button>
        <button id="continue-listening-btn">ç»§ç»­æ¸¸æˆ</button>
      </div>
    </div>
  </section>

  <!-- å•è¯å¬å¬ä¹ -->
  <section id="listening-mode" class="hidden">
    <h2>å•è¯å¬å¬ä¹</h2>
    <p id="listening-instructions">è¯·æ ¹æ®å¬åˆ°çš„å½•éŸ³å’Œä¸­æ–‡æç¤ºï¼Œé€‰å‡ºæ­£ç¡®çš„å•è¯</p>
    <div id="listening-area">
      <div id="listening-info">
        <button id="play-sound-btn" class="speaker">ğŸ”Š</button>
        <div id="hidden-word" class="hidden-word"></div>
        <div id="listening-prompt"></div>
      </div>
      <div id="options-area"></div>
    </div>
    <div id="listening-counter">å·²ç»ƒä¹ å•è¯ï¼š0</div>
    <div id="listening-end-section" class="hidden">
      <div class="error-summary" id="listening-error-summary">
        <strong>å¬å¬ä¹é”™è¯¯å•è¯æ€»ç»“ï¼š</strong><br>
        <div id="listening-errors"></div>
      </div>
      <div>
        <!-- â€œå¼€å¯æ–°ä¸€è½®æŒ‘æˆ˜â€æŒ‰é’® -->
        <button id="back-to-learn-btn4b" onclick="switchToLearnMode()">å¼€å¯æ–°ä¸€è½®æŒ‘æˆ˜</button>
      </div>
    </div>
  </section>

  <script>
    /***** å…¨å±€å˜é‡ *****/
    // å…¨å±€å•è¯åˆ—è¡¨ï¼ˆå®Œæ•´å•è¯é›†åˆï¼‰
    const wordList = [   
      {eng: "emotion and mood", cn: "æ„Ÿæƒ…å’Œæƒ…ç»ª"},
      {eng: "westerner", cn: "è¥¿æ–¹äºº"},
      {eng: "floor", cn: "åœ°æ¿"},
      {eng: "initial", cn: "æœ€åˆçš„ï¼Œé¦–å­—æ¯"},
      {eng: "initial migration", cn: "æœ€åˆçš„è¿å¾™"},
      {eng: "scale", cn: "å¤©å¹³"},
      {eng: "on small scale", cn: "å°èŒƒå›´çš„"},
      {eng: "sculpture", cn: "é›•åˆ»"},
      {eng: "carve/engrave sth", cn: "é›•åˆ»ä¸œè¥¿"},
      {eng: "serial", cn: "è¿ç»­çš„"},
      {eng: "a series of", cn: "ä¸€ç³»åˆ—çš„"},
      {eng: "TV series", cn: "ç”µè§†è¿ç»­å‰§"},
      {eng: "network", cn: "ç½‘ç»œ"},
      {eng: "badge", cn: "å¾½ç« "},
      {eng: "name badge", cn: "å†™æœ‰åå­—çš„èƒ¸ç‰Œ"},
      {eng: "channel", cn: "æµ·å³¡"},
      {eng: "raw", cn: "ç”Ÿçš„"},
      {eng: "raw material", cn: "åŸææ–™"},
      {eng: "self-defense", cn: "è‡ªå«"},
      {eng: "stressful", cn: "å‹åŠ›çš„"},
      {eng: "legal", cn: "åˆæ³•çš„"},
      {eng: "reinvest", cn: "é‡æ–°æŠ•èµ„"},
      {eng: "little-known", cn: "æ— åçš„"},
      {eng: "seating capacity", cn: "å®¹çº³è§‚ä¼—äººæ•°"},
      {eng: "cross passage", cn: "é€šé“"},
      {eng: "running tunnel", cn: "è¡Œè½¦éš§é“"},
      {eng: "filter", cn: "è¿‡æ»¤"},
      {eng: "rank", cn: "ç­‰çº§"},
      {eng: "high rank", cn: "é«˜çº§"},
      {eng: "have high rank in geography", cn: "åœ°ç†çº§åˆ«é«˜"},
      {eng: "non-active", cn: "ä¸æ´»è·ƒçš„"},
      {eng: "concentration", cn: "é›†ä¸­"},
      {eng: "microchip", cn: "èŠ¯ç‰‡"},
      {eng: "automobile", cn: "æ±½è½¦"},
      {eng: "exposition", cn: "åšè§ˆä¼š"},
      {eng: "World Expo=Exposition", cn: "ä¸–ç•Œåšè§ˆä¼š"},
      {eng: "monitor", cn: "ç›‘è§†ï¼Œç›‘è§†å™¨"},
      {eng: "brick", cn: "ç –"},
      {eng: "flood", cn: "æ´ªæ°´"},
      {eng: "suntan block", cn: "é˜²æ™’"},
      {eng: "altitude", cn: "é«˜åº¦"},
      {eng: "drum", cn: "é¼“"},
      {eng: "concert", cn: "éŸ³ä¹ä¼š"},
      {eng: "stretching", cn: "ä¼¸å±•çš„"},
      {eng: "mat", cn: "è„šå«"},
      {eng: "petrol", cn: "æ±½æ²¹"},
      {eng: "head office", cn: "æ€»éƒ¨"},
      {eng: "computer programmer", cn: "ç”µè„‘ç¨‹åºå‘˜"},
      {eng: "traditional", cn: "ä¼ ç»Ÿçš„"},
      {eng: "attitude", cn: "æ€åº¦"},
      {eng: "strict control", cn: "ä¸¥æ ¼æ§åˆ¶"},
      {eng: "sector", cn: "éƒ¨åˆ†"},
      {eng: "digital system", cn: "æ•°ç ç³»ç»Ÿ"},
      {eng: "preservation", cn: "ä¿å­˜"},
      {eng: "fan", cn: "è¿·ï¼Œç²‰ä¸ï¼Œæ‰‡å­"},
      {eng: "radar", cn: "é›·è¾¾"},
      {eng: "storage space", cn: "å­˜å‚¨ç©ºé—´"},
      {eng: "calculating", cn: "ç®—è®¡çš„"},
      {eng: "simulation", cn: "æ¨¡æ‹Ÿ"},
      {eng: "litre", cn: "å…¬å‡"},
      {eng: "collection tank", cn: "å‚¨å­˜ç½"},
      {eng: "decade", cn: "åå¹´"},
      {eng: "accountable", cn: "å¯æ•°çš„"},
      {eng: "private property", cn: "ç§äººè´¢äº§"},
      {eng: "philosopher", cn: "å“²å­¦å®¶"},
      {eng: "corrupt", cn: "è…è´¥çš„"},
      {eng: "morality", cn: "é“å¾·"},
      {eng: "ethic", cn: "é“å¾·"},
      {eng: "business ethics", cn: "å•†ä¸šé“å¾·"},
      {eng: "uncomfortable", cn: "ä¸èˆ’æœçš„"},
      {eng: "general election", cn: "å¤§é€‰ï¼Œæ™®é€‰"},
      {eng: "manufacture", cn: "ç”Ÿäº§"},
      {eng: "evolution", cn: "è¿›åŒ–"},
      {eng: "reproduce", cn: "å†ç”Ÿäº§"},
      {eng: "layout", cn: "å¹³é¢å›¾"},
      {eng: "double-grill", cn: "åŒæ ¼æ …"},
      {eng: "heat indicator", cn: "çƒ­åº¦æŒ‡ç¤º"},
      {eng: "buried", cn: "åŸ‹è—çš„"},
      {eng: "power company", cn: "ä¾›ç”µå…¬å¸"},
      {eng: "battery", cn: "ç”µæ± "},
      {eng: "tide", cn: "æ½®æ°´"},
      {eng: "hearing", cn: "å¬è§‰"},
      {eng: "moderate", cn: "ä¸­åº¦çš„"},
      {eng: "cost effective", cn: "æ€§ä»·æ¯”æ¯”è¾ƒé«˜"},
      {eng: "shade", cn: "é˜´å½±"},
      {eng: "climate", cn: "å¤©æ°”"},
      {eng: "flooding", cn: "æ´ªæ°´"},
      {eng: "improve", cn: "æé«˜"},
      {eng: "petrol", cn: "æ±½æ²¹"},
      {eng: "petroleum", cn: "çŸ³æ²¹"},
      {eng: "gasoline", cn: "çŸ³æ²¹ï¼ˆç¾ï¼‰"},
      {eng: "adequate", cn: "å……è¶³çš„"},
      {eng: "soundproof", cn: "éš”éŸ³çš„"},
      {eng: "loss", cn: "æŸå¤±"},
      {eng: "pay for loss", cn: "è¡¥å¿æŸå¤±"},
      {eng: "stuff", cn: "åŸæ–™ï¼Œä¸œè¥¿"},
      {eng: "resistance", cn: "æŠµæŠ—"},
      {eng: "resistance from parents", cn: "æ¥è‡ªå®¶é•¿çš„åå¯¹"},
      {eng: "authority", cn: "æƒå¨"},
      {eng: "opportunity", cn: "æœºä¼š"},
      {eng: "mathematics", cn: "æ•°å­¦"},
      {eng: "predictable", cn: "å¯é¢„è¨€çš„"},
      {eng: "band", cn: "ä¹é˜Ÿ"},
      {eng: "banned", cn: "ç¦æ­¢"},
      {eng: "replacement", cn: "æ›¿ä»£"},
      {eng: "replacement of jobs", cn: "æ¢å·¥ä½œ"},
      {eng: "replacement policy", cn: "æ›¿ä»£æ”¿ç­–"},
      {eng: "container", cn: "å®¹å™¨"},
      {eng: "contain", cn: "åŒ…å«"},
      {eng: "margin", cn: "é¡µè¾¹çš„ç©ºç™½"},
      {eng: "wedding", cn: "å©šç¤¼"},
      {eng: "wedding photos", cn: "å©šç¤¼ç…§ç‰‡"},
      {eng: "satellite", cn: "å«æ˜Ÿ"},
      {eng: "satellite TV station", cn: "å«æ˜Ÿç”µè§†å°"},
      {eng: "assistance", cn: "æ´åŠ©"},
      {eng: "reverse", cn: "ç›¸åçš„"},
      {eng: "awful", cn: "å¯æ€•çš„"},
      {eng: "awfully", cn: "ååˆ†ï¼Œéå¸¸"},
      {eng: "appeal", cn: "å‘¼å"},
      {eng: "agriculture", cn: "å†œä¸š"},
      {eng: "oil", cn: "æ²¹"},
      {eng: "oil explosion", cn: "çŸ³æ²¹çˆ†ç‚¸"},
      {eng: "food and oil", cn: "é£Ÿç‰©å’Œæ²¹"},
      {eng: "anger", cn: "æ„¤æ€’"},
      {eng: "pop", cn: "æµè¡Œçš„"},
      {eng: "pop test", cn: "æŠ½è€ƒ"},
      {eng: "delay", cn: "è€½æ"},
      {eng: "Olympic", cn: "å¥¥æ—åŒ¹å…‹è¿åŠ¨ä¼šçš„"},
      {eng: "have strong hearts and lungs", cn: "å¿ƒè‚ºåŠŸèƒ½è‰¯å¥½"},
      {eng: "perfect", cn: "å®Œç¾çš„"},
      {eng: "suitable", cn: "åˆé€‚çš„"},
      {eng: "dial", cn: "æ‹¨å·"},
      {eng: "sting", cn: "åˆº"},
      {eng: "scandal", cn: "ä¸‘é—»"},
      {eng: "sponsor", cn: "èµåŠ©è€…"},
      {eng: "alternative", cn: "å¯é€‰æ‹©çš„"},
      {eng: "alternative energies", cn: "å¯æ›¿ä»£èƒ½æº"},
      {eng: "uncomfortable", cn: "ä¸èˆ’æœçš„"},
      {eng: "relevant", cn: "ç›¸å…³çš„"},
      {eng: "beautiful", cn: "ç¾ä¸½çš„"},
      {eng: "chocolate", cn: "å·§å…‹åŠ›"},
      {eng: "percent", cn: "ç™¾åˆ†æ¯”"},
      {eng: "nurse", cn: "æŠ¤å£«"},
      {eng: "nursery", cn: "æ‰˜å„¿æ‰€"},
      {eng: "companion", cn: "åŒä¼´"},
      {eng: "company", cn: "é™ªä¼´"},
      {eng: "usage", cn: "ä½¿ç”¨"},
      {eng: "strength", cn: "åŠ›é‡"},
      {eng: "relief", cn: "å‡è½»ï¼ˆç—›è‹¦ï¼‰"},
      {eng: "relieve", cn: "å‡è½»"},
      {eng: "hunt", cn: "æ‰“çŒ"},
      {eng: "hunt for", cn: "å¯»æ‰¾"},
      {eng: "emperor", cn: "çš‡å¸"},
      {eng: "king", cn: "å›½ç‹"},
      {eng: "sign", cn: "æ ‡è®°"},
      {eng: "mile", cn: "è‹±é‡Œ"},
      {eng: "accuracy", cn: "å‡†ç¡®åº¦"},
      {eng: "accurate", cn: "å‡†ç¡®æ— è¯¯çš„"},
      {eng: "inaccurate", cn: "ä¸å‡†ç¡®çš„"},
      {eng: "precision", cn: "ç²¾å¯†åº¦"},
      {eng: "appointment", cn: "é¢„çº¦"},
      {eng: "pleasant", cn: "æ„‰å¿«çš„"},
      {eng: "steering", cn: "æ“çºµ"},
      {eng: "good steering", cn: "æ–¹ä¾¿æ“çºµ"},
      {eng: "website", cn: "ç½‘å€"},
      {eng: "influence", cn: "å½±å“"},
      {eng: "instruct", cn: "æç¤º"},
      {eng: "instruction", cn: "æŒ‡ç¤º"},
      {eng: "kilogram", cn: "å…¬æ–¤"},
      {eng: "disposal", cn: "å¤„ç†"},
      {eng: "waste disposal", cn: "åºŸç‰©å¤„ç†"},
      {eng: "illegal", cn: "éæ³•çš„"},
      {eng: "mine", cn: "çŸ¿"},
      {eng: "television", cn: "ç”µè§†"},
      {eng: "television drama", cn: "ç”µè§†æˆå‰§"},
      {eng: "magnificent", cn: "åä¸½çš„"},
      {eng: "seasoned", cn: "å­£èŠ‚ï¼Œé£å¹²"},
      {eng: "measure", cn: "æµ‹é‡"},
      {eng: "Drama", cn: "æˆå‰§èŠ‚"},
      {eng: "beard", cn: "èƒ¡å­"},
      {eng: "moustache", cn: "ä¸Šå”‡ä¸Šçš„å°èƒ¡å­"},
      {eng: "decline", cn: "ä¸‹é™"},
      {eng: "shoplifter", cn: "é¡ºæ‰‹ç‰µç¾Šçš„äºº"},
      {eng: "beauty", cn: "ç¾å¥³"},
      {eng: "rider", cn: "éª‘æ‰‹"},
      {eng: "mood", cn: "æƒ…ç»ª"},
      {eng: "geographical", cn: "åœ°ç†çš„ä»·å€¼"},
      {eng: "mixture", cn: "æ··åˆç‰©"},
      {eng: "irritable", cn: "æ˜“æ€’çš„"},
      {eng: "irritation", cn: "æ„¤æ€’"},
      {eng: "arrival", cn: "åˆ°è¾¾"},
      {eng: "satisfaction", cn: "æ»¡æ„"},
      {eng: "status", cn: "åœ°ä½"},
      {eng: "social status", cn: "ç¤¾ä¼šåœ°ä½"},
      {eng: "stage", cn: "èˆå°ï¼Œé˜¶æ®µ"},
      {eng: "permit", cn: "è®¸å¯è¯"},
      {eng: "permit required", cn: "æŸ¥è®¸å¯è¯"},
      {eng: "discovery", cn: "å‘ç°"},
      {eng: "parcel", cn: "åŒ…è£¹"},
      {eng: "sufficient", cn: "å……åˆ†çš„"},
      {eng: "subjective", cn: "ä¸»è§‚çš„"},
      {eng: "objective", cn: "å®¢è§‚çš„"},
      {eng: "page", cn: "é¡µç "},
      {eng: "usual", cn: "æ™®é€šçš„"},
      {eng: "latest", cn: "æœ€æ–°çš„"},
      {eng: "development", cn: "å‘å±•"},
      {eng: "rehearsal", cn: "æ¼”å‡ºï¼Œå½©æ’"},
      {eng: "dress rehearsal", cn: "å½©æ’"},
      {eng: "weapon", cn: "æ­¦å™¨"},
      {eng: "trade", cn: "è´¸æ˜“"},
      {eng: "innovation", cn: "é©æ–°"},
      {eng: "lava", cn: "ç«å±±å²©"},
      {eng: "theft", cn: "ç›—çªƒ"},
      {eng: "knowledge", cn: "çŸ¥è¯†"},
      {eng: "curly", cn: "å·å‘çš„"},
      {eng: "cotton", cn: "æ£‰èŠ±"},
      {eng: "mill", cn: "ç¢¾ç£¨ï¼Œç£¨ç»†"},
      {eng: "mill the grain on the ground", cn: "åœ¨åœ°ä¸ŠæŠŠè°·ç‰©ç£¨ç»†"},
      {eng: "magic", cn: "é­”æœ¯çš„"},
      {eng: "magical", cn: "éš¾ä»¥æƒ³è±¡çš„ï¼Œä¸å¯æ€è®®çš„"},
      {eng: "magical animals", cn: "ç¥å¥‡çš„åŠ¨ç‰©"},
      {eng: "systematic", cn: "ç³»ç»Ÿçš„"},
      {eng: "work systematically", cn: "ç³»ç»Ÿåœ°å·¥ä½œ"},
      {eng: "shell", cn: "è´å£³"},
      {eng: "unique", cn: "ç‹¬ç‰¹çš„"},
      {eng: "polish", cn: "æŠ›å…‰ï¼Œæ“¦äº®"},
      {eng: "cut and polished", cn: "ç»è¿‡åˆ‡å‰²å’ŒæŠ›å…‰çš„"},
      {eng: "polish cars", cn: "æ±½è½¦æŠ›å…‰"},
      {eng: "knife", cn: "åˆ€"},
      {eng: "critical", cn: "æ‰¹è¯„çš„"},
      {eng: "crucial", cn: "è‡³å…³é‡è¦çš„ï¼Œå†³å®šæ€§çš„"},
      {eng: "consumption", cn: "æ¶ˆè´¹"},
      {eng: "human consumption", cn: "äººç±»æ¶ˆè´¹"},
      {eng: "crisis", cn: "å±æœº"},
      {eng: "belt", cn: "å¸¦å­"},
      {eng: "seat belt", cn: "å®‰å…¨å¸¦"},
      {eng: "steady", cn: "ç¨³å®šçš„"},
      {eng: "remain steady", cn: "ä¿æŒç¨³å®š"},
      {eng: "deteriorate", cn: "æ¶åŒ–"},
      {eng: "surface", cn: "è¡¨é¢"},
      {eng: "seasoned", cn: "é£å¹²çš„"},
      {eng: "wood should be cut and seasoned", cn: "æœ¨å¤´è¦è¢«ç ä¸‹æ¥ï¼Œç„¶åé£å¹²"},
      {eng: "cupboard", cn: "æ©±æŸœ"},
      {eng: "inland", cn: "å†…é™†"},
      {eng: "inland region", cn: "å†…é™†åœ°åŒº"},
      {eng: "free", cn: "è‡ªç”±çš„"},
      {eng: "freedom", cn: "è‡ªç”±"},
      {eng: "response", cn: "å›ç­”"},
      {eng: "answer", cn: "å›ç­”"},
      {eng: "jewelry", cn: "ç å®"},
      {eng: "journalist", cn: "è®°è€…"},
      {eng: "repair", cn: "ä¿®ç†"},
      {eng: "cage", cn: "ç¬¼å­"},
      {eng: "candle", cn: "èœ¡çƒ›"},
      {eng: "wax", cn: "èœ¡"},
      {eng: "sensible", cn: "æ˜æ™ºçš„"},
      {eng: "sensible exercise", cn: "é€‚å½“è¿åŠ¨"},
      {eng: "depression", cn: "æ²®ä¸§"},
      {eng: "layer", cn: "é˜¶å±‚"},
      {eng: "ambiguous", cn: "æœ‰æ­§ä¹‰çš„"},
      {eng: "excuse", cn: "å€Ÿå£"},
      {eng: "lessen", cn: "å‡è½»"},
      {eng: "layout", cn: "å¹³é¢å›¾"},
      {eng: "reflectance", cn: "åå°„ç³»æ•°"},
      {eng: "reserve", cn: "ä¿ç•™"},
      {eng: "book in advance", cn: "é¢„å®š"},
      {eng: "genetic", cn: "é—ä¼ çš„"},
      {eng: "import", cn: "è¿›å£"},
      {eng: "tribute", cn: "è´¡å“"},
      {eng: "bridge", cn: "æ¡¥"},
      {eng: "chat", cn: "èŠå¤©"},
      {eng: "TV chat show", cn: "ç”µè§†è®¿è°ˆ"},
      {eng: "strike", cn: "ç½¢å·¥"},
      {eng: "basis", cn: "åŸºç¡€"},
      {eng: "bases", cn: "åº•éƒ¨ï¼ŒåŸºåœ°"},
      {eng: "amazing", cn: "ä»¤äººæƒŠè®¶çš„"},
      {eng: "reliable", cn: "å¯ä¾èµ–çš„"},
      {eng: "shelf", cn: "æ¶å­"},
      {eng: "top shelf", cn: "æœ€é«˜çš„æ¶å­"},
      {eng: "frequency", cn: "é¢‘ç‡"},
      {eng: "enhance", cn: "æé«˜"},
            {eng: "be prone to", cn: "æ˜“äº"},
      {eng: "essential", cn: "åŸºæœ¬çš„"},
      {eng: "fundamental", cn: "åŸºæœ¬çš„"},
      {eng: "steel", cn: "é’¢æ"},
      {eng: "steal", cn: "å·ã€çªƒå–"},
      {eng: "steel and wood", cn: "é’¢æå’Œæœ¨å¤´"},
      {eng: "traditional", cn: "ä¼ ç»Ÿçš„"},
      {eng: "ordinary", cn: "æ™®é€šçš„"},
      {eng: "ordinary farmers", cn: "æ™®é€šå†œæ°‘"},
      {eng: "preposition", cn: "ä»‹è¯"},
      {eng: "wing", cn: "ç¿…è†€ã€ç¿¼"},
      {eng: "wing design", cn: "æœºç¿¼è®¾è®¡"},
      {eng: "watchdog", cn: "è­¦å¯Ÿå±€çš„åç§°"},
      {eng: "second-hand", cn: "äºŒæ‰‹çš„"},
      {eng: "cheerful", cn: "é«˜å…´çš„"},
      {eng: "cheers", cn: "å¹²æ¯"},
      {eng: "reform", cn: "æ”¹é©"},
      {eng: "agrarian reform", cn: "åœŸåœ°æ”¹é©"},
      {eng: "contract", cn: "åˆåŒã€å°èŠ±ç¨"},
      {eng: "barren", cn: "è´«ç˜ çš„"},
      {eng: "event", cn: "äº‹ä»¶"},
      {eng: "intervention", cn: "å¹²æ¶‰"},
      {eng: "metal", cn: "é‡‘å±"},
      {eng: "kiosk", cn: "å°å–éƒ¨"},
      {eng: "seven-screen", cn: "ä¸ƒä¸ªå±å¹•çš„"},
      {eng: "handball", cn: "æ‰‹çƒ"},
      {eng: "independence", cn: "ç‹¬ç«‹"},
      {eng: "Independence Day", cn: "ç¾å›½ç‹¬ç«‹çºªå¿µæ—¥"},
      {eng: "age", cn: "å¹´çºª"},
      {eng: "immune", cn: "å…ç–«çš„"},
      {eng: "immune system", cn: "å…ç–«ç³»ç»Ÿ"},
      {eng: "warehouse", cn: "ä»“åº“ã€ä»“å‚¨è¶…å¸‚"},
      {eng: "self-defence", cn: "è‡ªå«"},
      {eng: "carving", cn: "é›•åˆ»"},
      {eng: "carving wood", cn: "æœ¨å¤´é›•åˆ»"},
      {eng: "privacy", cn: "éšç§"},
      {eng: "apostrophe", cn: "å³ä¸Šè§’çœç•¥å·"},
      {eng: "poll", cn: "ï¼ˆæ°‘æ„ï¼‰è°ƒæŸ¥"},
      {eng: "elbow", cn: "è‚˜"},
      {eng: "hunting", cn: "æ‰“çŒ"},
      {eng: "self-discipline", cn: "è‡ªæˆ‘çº¦æŸ"},
      {eng: "tune", cn: "æ›²è°ƒ"},
      {eng: "expansion", cn: "æ‰©å……"},
      {eng: "sailing", cn: "èˆªè¡Œ"},
      {eng: "rows", cn: "æ¨ªæ’"},
      {eng: "40 seats in rows", cn: "æ¯æ’40äºº"},
      {eng: "maintain", cn: "ç»´ä¿®"},
      {eng: "maintenance", cn: "ç»´æŠ¤"},
      {eng: "former", cn: "ä»¥å‰çš„"},
      {eng: "previous", cn: "ä»¥å‰çš„"},
      {eng: "surrounding", cn: "å‘¨å›´"},
      {eng: "toy", cn: "ç©å…·"},
      {eng: "soft toys", cn: "è½¯è½¯çš„ç©å…·"},
      {eng: "stuffed toys", cn: "æ¯›ç»’ç©å…·"},
      {eng: "expectancy", cn: "æœŸå¾…"},
      {eng: "life expectancy", cn: "å¯¿å‘½"},
      {eng: "fabric", cn: "çººç»‡å“"},
      {eng: "section", cn: "éƒ¨åˆ†"},
      {eng: "star", cn: "æ’æ˜Ÿ"},
      {eng: "artistic", cn: "è‰ºæœ¯çš„"},
      {eng: "artistic approach", cn: "è‰ºæœ¯çš„æ–¹æ³•"},
      {eng: "self-funded", cn: "è‡ªç»™è‡ªè¶³çš„"},
      {eng: "self-sufficient", cn: "è‡ªç»™è‡ªè¶³çš„"},
      {eng: "addition", cn: "é¢å¤–"},
      {eng: "additional", cn: "é¢å¤–çš„"},
      {eng: "sacked", cn: "è¢«è§£é›‡çš„"},
      {eng: "give sb. a sack", cn: "è§£é›‡"},
      {eng: "kick sb. out of work", cn: "è§£é›‡"},
      {eng: "preference", cn: "åçˆ±"},
      {eng: "flash", cn: "é—ª"},
      {eng: "flashlight", cn: "æ‰‹ç”µç­’ã€é—ªå…‰ç¯"},
      {eng: "exception", cn: "ä¾‹å¤–"},
      {eng: "reinforced", cn: "åŠ å¼ºçš„"},
      {eng: "reinforced by wood and steel", cn: "æœ‰æœ¨å¤´å’Œé’¢æåŠ å›º"},
      {eng: "highly-trained", cn: "é«˜åº¦è®­ç»ƒçš„"},
      {eng: "highly-trained staff", cn: "é«˜åº¦å—è®­çš„å‘˜å·¥"},
      {eng: "vary", cn: "å˜åŒ–"},
      {eng: "vary according to the type, shape", cn: "å› ä¸ºç±»åˆ«ã€å½¢çŠ¶è€Œæœ‰å·®å¼‚"},
      {eng: "pure", cn: "çº¯æ´çš„"},
      {eng: "purest", cn: "çº¯å‡€çš„"},
      {eng: "harbour", cn: "æ¸¯å£"},
      {eng: "port", cn: "æ¸¯å£"},
      {eng: "skin", cn: "çš®è‚¤"},
      {eng: "heroine", cn: "å¥³ä¸»äººå…¬"},
      {eng: "exposure", cn: "æ›å…‰"},
      {eng: "number of exposure", cn: "ç…§ç›¸çš„æ•°é‡"},
      {eng: "inability", cn: "æ²¡èƒ½åŠ›"},
      {eng: "pianist", cn: "é’¢ç´å®¶"},
      {eng: "housing", cn: "ä½æˆ¿"},
      {eng: "household", cn: "å®¶åº­"},
      {eng: "naught", cn: "é›¶"},
      {eng: "stair", cn: "æ¥¼æ¢¯"},
      {eng: "stare", cn: "ç›¯è§†"},
      {eng: "complaint", cn: "æŠ±æ€¨"},
      {eng: "noise", cn: "å™ªå£°"},
      {eng: "low frequency noise", cn: "ä½é¢‘å™ªå£°"},
      {eng: "potential", cn: "æ½œåœ¨çš„"},
      {eng: "value", cn: "ä»·å€¼"},
      {eng: "river", cn: "æ²³"},
      {eng: "ending", cn: "ç»“æŸ"},
      {eng: "texture", cn: "è´¨åœ°"},
      {eng: "fine texture", cn: "è´¨åœ°ç»†è…»"},
      {eng: "coarse texture", cn: "è´¨åœ°ç²—ç³™"},
      {eng: "super", cn: "è¶…çº§çš„"},
      {eng: "supermarket", cn: "è¶…å¸‚"},
      {eng: "rock", cn: "å²©çŸ³"},
      {eng: "touching rocks", cn: "æ¥è§¦å²©çŸ³"},
      {eng: "rock salt", cn: "å²©ç›"},
      {eng: "branch", cn: "åˆ†æ”¯ã€åˆ†éƒ¨"},
      {eng: "informative", cn: "é€šçŸ¥çš„ã€æœ‰ä¿¡æ¯çš„"},
      {eng: "information", cn: "ä¿¡æ¯"},
      {eng: "agreement", cn: "åŒæ„"},
      {eng: "disagreement", cn: "ä¸åŒçš„"},
      {eng: "high quality camera", cn: "é«˜è´¨é‡ç›¸æœº"},
      {eng: "domestic", cn: "å†…éƒ¨çš„"},
      {eng: "domestic factors", cn: "å†…éƒ¨å› ç´ "},
      {eng: "religion", cn: "å®—æ•™"},
      {eng: "empty", cn: "ç©ºçš„"},
      {eng: "emptiness", cn: "ç©ºè™š"},
      {eng: "package", cn: "åŒ…è£…"},
      {eng: "distant", cn: "è¿œçš„"},
      {eng: "remote", cn: "è¿œçš„"},
      {eng: "fair", cn: "ç¾ä¸½çš„ã€å…¬å¹³çš„"},
      {eng: "story", cn: "æ•…äº‹"},
      {eng: "evidence", cn: "è¯æ®"},
      {eng: "positive", cn: "ç§¯æçš„"},
      {eng: "negative", cn: "æ¶ˆæçš„ã€è´Ÿç‰‡"},
      {eng: "exciting", cn: "ä»¤äººå…´å¥‹çš„"},
      {eng: "excitement", cn: "å…´å¥‹"},
      {eng: "excited", cn: "å…´å¥‹çš„"},
      {eng: "conqueror", cn: "å¾æœè€…"},
      {eng: "distribution", cn: "åˆ†å¸ƒ"},
      {eng: "distribution of population", cn: "äººå£åˆ†å¸ƒ"},
      {eng: "confirmation", cn: "è¯å®ã€ç¡®è®¤"},
      {eng: "give confirmation", cn: "å‘å‡ºç¡®è®¤ä¿¡"},
      {eng: "virtually", cn: "å‡ ä¹"},
      {eng: "almost", cn: "å‡ ä¹ã€å·®ä¸å¤š"},
      {eng: "worthwhile", cn: "å€¼å¾—çš„"},
      {eng: "worthy", cn: "å€¼å¾—åšæŸäº‹"},
      {eng: "main", cn: "ä¸»è¦çš„"},
      {eng: "main entrance", cn: "ä½äººå£"},
      {eng: "main hall", cn: "ä¸»å…"},
      {eng: "main kitchen", cn: "ä¸»å¨æˆ¿"},
      {eng: "main library", cn: "ä¸»è¦å›¾ä¹¦é¦†"},
      {eng: "grass", cn: "è‰"},
      {eng: "cliff", cn: "æ‚¬å´–"},
      {eng: "physically", cn: "èº«ä½“åœ°"},
      {eng: "physical", cn: "èº«ä½“çš„"},
      {eng: "irrigation", cn: "çŒæº‰"},
      {eng: "irrigate", cn: "çŒæº‰"},
      {eng: "irritation", cn: "æ„¤æ€’"},
      {eng: "scarce", cn: "ä¸è¶³çš„"},
      {eng: "scarcely", cn: "ä¸è¶³åœ°"},
      {eng: "removal", cn: "å»æ‰"},
      {eng: "low-risk", cn: "ä½é£é™©"},
      {eng: "high-risk", cn: "é«˜é£é™©"},
      {eng: "cannibal", cn: "é£Ÿäººè€…"},
      {eng: "herbivorous", cn: "é£Ÿè‰çš„"},
      {eng: "scent", cn: "æ°”å‘³"},
      {eng: "strong scent", cn: "å¾ˆé‡çš„æ°”å‘³"},
      {eng: "scheme", cn: "æ–¹æ¡ˆ"},
      {eng: "overhead view", cn: "ä¿¯è§†"},
      {eng: "city overhead view", cn: "åŸå¸‚ä¿¯è§†å›¾"},
      {eng: "visitor", cn: "è®¿é—®è€…"},
      {eng: "tile", cn: "ç“¦"},
      {eng: "quarry tiles", cn: "ç“¦ç‰‡çš„ä¸€ç§"},
      {eng: "likelihood", cn: "å¯èƒ½æ€§"},
      {eng: "possibility", cn: "å¯èƒ½æ€§"},
      {eng: "danger", cn: "å±é™©"},
      {eng: "dangerous", cn: "å±é™©çš„"},
      {eng: "hazardous", cn: "å±é™©çš„"},
      {eng: "pure", cn: "çº¯æ´çš„"},
      {eng: "purest", cn: "çº¯æ´çš„ï¼ˆæœ€é«˜çº§ï¼‰"},
      {eng: "repeat", cn: "é‡å¤"},
      {eng: "repetition", cn: "é‡å¤"},
      {eng: "correspondence", cn: "å†™ä¿¡"},
      {eng: "letter", cn: "ä¿¡ä»¶"},
      {eng: "unanimous", cn: "æ„è§ä¸€è‡´çš„"},
      {eng: "depth", cn: "æ·±åº¦"},
      {eng: "approval", cn: "åŒæ„"},
      {eng: "enthusiasm", cn: "çƒ­æƒ…"},
      {eng: "enthusiastic", cn: "çƒ­æƒ…çš„"},
      {eng: "housekeeping", cn: "å®¶åŠ¡ç®¡ç†"},
      {eng: "housework", cn: "å®¶åŠ¡ç®¡ç†"},
      {eng: "emotion", cn: "æ„Ÿæƒ…"},
      {eng: "performer", cn: "è¡¨æ¼”è€…"},
      {eng: "miserable", cn: "ç—›è‹¦çš„"},
      {eng: "craft", cn: "æ‰‹è‰º"},
      {eng: "craft goods", cn: "æ‰‹å·¥è‰ºåˆ¶å“"},
      {eng: "hero", cn: "è‹±é›„"},
      {eng: "politics", cn: "æ”¿æ²»"},
      {eng: "political", cn: "æ”¿æ²»çš„"},
      {eng: "author", cn: "ä½œè€…"},
      {eng: "woman author", cn: "å¥³ä½œè€…"},
      {eng: "serious", cn: "ä¸¥è‚ƒçš„"},
      {eng: "a serious person", cn: "ä¸€ä¸ªä¸¥è‚ƒçš„äºº"},
      {eng: "prone", cn: "å®¹æ˜“ã€å€¾å‘äº"},
      {eng: "clever", cn: "èªæ˜çš„"},
      {eng: "smart", cn: "èªæ˜çš„"},
      {eng: "souvenir", cn: "çºªå¿µå“"},
      {eng: "helpline", cn: "å¸®åŠ©çƒ­çº¿"},
      {eng: "hotline", cn: "çƒ­çº¿"},
      {eng: "width", cn: "å®½åº¦"},
      {eng: "favorite", cn: "æœ€å–œæ¬¢çš„"},
      {eng: "great favorites", cn: "æœ€å–œæ¬¢çš„"},
      {eng: "online", cn: "åœ¨çº¿"},
      {eng: "online shopping", cn: "ç½‘ä¸Šè´­ç‰©"},
      {eng: "flag", cn: "æ——"},
      {eng: "instrument", cn: "ä»ªå™¨ã€ä¹å™¨"},
      {eng: "guitar", cn: "å‰ä»–"},
      {eng: "piano", cn: "é’¢ç´"},
      {eng: "design", cn: "è®¾è®¡"},
      {eng: "designer", cn: "è®¾è®¡å¸ˆ"},
      {eng: "beat", cn: "è·³åŠ¨"},
      {eng: "heart beats", cn: "å¿ƒè·³"},
      {eng: "pair", cn: "å‰¯"},
      {eng: "a pair of glasses", cn: "ä¸€å‰¯çœ¼é•œ"},
      {eng: "telescope", cn: "æœ›è¿œé•œ"},
      {eng: "microscope", cn: "æ˜¾å¾®é•œ"},
      {eng: "delivery", cn: "å‘è´§ã€é€è´§"},
      {eng: "delivery", cn: "é€è´§"},
      {eng: "sharp", cn: "é”‹åˆ©çš„ã€ç´§æ€¥çš„"},
      {eng: "a sharp turn", cn: "æ€¥è½¬å¼¯"},
      {eng: "pleasure", cn: "ä¹è¶£"},
      {eng: "delight", cn: "é«˜å…´"},
      {eng: "institute", cn: "æœºæ„"},
      {eng: "visible", cn: "å¯è§†çš„"},
      {eng: "in visible view", cn: "åœ¨è§†é‡èŒƒå›´å†…"},
      {eng: "silence", cn: "å®‰é™"},
      {eng: "silent", cn: "å®‰é™çš„"},
      {eng: "dispute", cn: "äº‰ç«¯"},
      {eng: "controversy", cn: "äº‰è®®"},
      {eng: "debate", cn: "è¾©è®º"},
      {eng: "shuttle", cn: "ç©¿æ¢­"},
      {eng: "(space)shuttle", cn: "å¤ªç©ºé£èˆ¹"},
      {eng: "air shuttle bus", cn: "æœºåœºå·´å£«"},
      {eng: "rat", cn: "è€é¼ "},
      {eng: "golf", cn: "é«˜å°”å¤«"},
      {eng: "gulf", cn: "æµ·æ¹¾ã€é¸¿æ²Ÿ"},
      {eng: "Golf Club", cn: "é«˜å°”å¤«ä¿±ä¹éƒ¨"},
      {eng: "risk", cn: "å†’é™©"},
      {eng: "take risks", cn: "å†’é£é™©"},
      {eng: "run risks", cn: "å†’é£é™©"},
      {eng: "adventure", cn: "å†’é™©"},
      {eng: "surprise", cn: "æƒŠå¥‡"},
      {eng: "surprised", cn: "æƒŠå¥‡çš„"},
      {eng: "maid", cn: "å¥³ä»†"},
      {eng: "servant", cn: "ä½£äººã€ä»†äºº"},
      {eng: "maid servant", cn: "å¥³ä½£äºº"},
      {eng: "pal", cn: "ä¼™ä¼´"},
      {eng: "pal group relationship", cn: "ä¼™ä¼´å…³ç³»"},
      {eng: "actor", cn: "ç”·æ¼”å‘˜"},
      {eng: "flow", cn: "æµé‡"},
      {eng: "measurement", cn: "æµ‹é‡"},
      {eng: "units of measurement", cn: "æµ‹é‡å•ä½"},
      {eng: "time measurement", cn: "å¯¹æ—¶é—´æµ‹é‡"},
      {eng: "stability", cn: "ç¨³å®š"},
      {eng: "stable", cn: "ç¨³å®šçš„"},
      {eng: "enormous", cn: "å¹¿æ³›çš„ã€å¤§çš„"},
      {eng: "broad", cn: "å¹¿æ³›çš„"},
      {eng: "timber", cn: "æœ¨æ"},
      {eng: "grain pattern of timber", cn: "ç»†è…»çš„æœ¨çº¹å›¾æ¡ˆ"},
      {eng: "draw", cn: "ç»˜å›¾"},
      {eng: "concession", cn: "è®©æ­¥"},
      {eng: "existence", cn: "å­˜åœ¨"},
      {eng: "exist", cn: "å­˜åœ¨"},
      {eng: "existent", cn: "å­˜åœ¨çš„"},
      {eng: "existing", cn: "å­˜åœ¨"},
      {eng: "baldness", cn: "ç§ƒå¤´"},
      {eng: "baldness", cn: "å¤´ç§ƒçš„"},
      {eng: "gold", cn: "é‡‘å­"},
      {eng: "gold medal", cn: "é‡‘ç‰Œ"},
      {eng: "divorce", cn: "ç¦»å©š"},
      {eng: "divorce rate", cn: "ç¦»å©šç‡"},
      {eng: "breath-taking", cn: "ä»¤äººå±ä½å‘¼å¸"},
      {eng: "majority", cn: "å¤šæ•°"},
      {eng: "major", cn: "ä¸»è¦çš„"},
      {eng: "exchange", cn: "äº¤æ¢"},
      {eng: "exchange drafts", cn: "äº¤æ¢è‰ç¨¿"},
      {eng: "net", cn: "ç½‘"},
      {eng: "mosquito nets", cn: "èšŠå¸"},
      {eng: "slang", cn: "ä¿šè¯­"},
      {eng: "switch", cn: "å¼€å…³"},
      {eng: "overall", cn: "æ•´ä¸ªçš„"},
      {eng: "whole", cn: "æ•´ä¸ªçš„"},
      {eng: "pattern", cn: "æ¨¡å¼ã€èŠ±çº¹"},
      {eng: "thinking pattern", cn: "æ€ç»´æ¨¡å¼"},
      {eng: "grain pattern", cn: "å›¾æ¡ˆ"},
      {eng: "migration pattern", cn: "è¿å¾™è·¯çº¿"},
      {eng: "ground", cn: "åœºåœ°"},
      {eng: "playground", cn: "æ“åœº"},
      {eng: "fair", cn: "å…¬å¹³çš„"},
      {eng: "unfair", cn: "ä¸å…¬å¹³çš„"},
      {eng: "memorise", cn: "è®°ä½"},
      {eng: "corpse", cn: "å°¸ä½“"},
      {eng: "keeper", cn: "å…»è‚²è€…"}
    ];
    
    // å½“å‰è¿™ä¸€è½®å­¦ä¹ æ¨¡å¼ä½¿ç”¨çš„å•è¯é›†åˆï¼Œå…¶ä»–æ¨¡å¼å‡åŸºäºæ­¤
    let currentWords = [];
    let gameCards = [];
    let firstCard = null;
    let errorWords = {};
    let globalErrors = {};
    let roundsSinceError = 0;
    
    let savedGameState = null;
    let gamePaused = false;
    
    let puzzleIndex = 0;
    let puzzleErrors = {};
    let puzzleCount = 0;
    
    let listeningIndex = 0;
    let listeningErrors = {};
    let totalListening = 0;
    
    // ç”¨äºåˆ·æ–°æ–°ä¸€è½®æ—¶æ’é™¤ä¸Šä¸€è½®å•è¯ï¼ˆå¯é€‰ï¼‰
    let prevRoundWords = new Set();
    
    /***** è¾…åŠ©å‡½æ•° *****/
    // è·å–16ä¸ªå•è¯ï¼Œæ–°ä¸€è½®ç”Ÿæˆæ—¶æ’é™¤ prevRoundWordsï¼ˆå…è®¸æœ€å¤šä¿ç•™3ä¸ªé”™è¯¯å•è¯ï¼‰
    function getRandomWords(n, excludeSet = new Set()) {
      let result = [];
      if (Object.keys(globalErrors).length === 0) {
        let available = wordList.filter(w => !excludeSet.has(w.eng));
        if (available.length < n) { available = wordList.slice(); }
        available.sort(() => 0.5 - Math.random());
        result = available.slice(0, n);
      } else {
        let errorArr = Object.keys(globalErrors);
        errorArr.sort(() => 0.5 - Math.random());
        let maxErrors = Math.min(3, errorArr.length);
        let errorWordsArr = errorArr.slice(0, maxErrors).map(eng => {
          return wordList.find(w => w.eng === eng) || {eng: eng, cn: globalErrors[eng]};
        });
        let errorSet = new Set(errorWordsArr.map(w => w.eng));
        let available = wordList.filter(w => !excludeSet.has(w.eng) && !errorSet.has(w.eng));
        available.sort(() => 0.5 - Math.random());
        let remaining = n - errorWordsArr.length;
        result = errorWordsArr.concat(available.slice(0, remaining));
        result.sort(() => 0.5 - Math.random());
      }
      return result;
    }
    
    function updateRoundsCount() {
      if (Object.keys(globalErrors).length === 0) {
        roundsSinceError++;
      } else {
        roundsSinceError = 0;
      }
    }
    
    function removeGlobalError(eng) {
      if (globalErrors.hasOwnProperty(eng)) {
        delete globalErrors[eng];
      }
    }
    
    /***** å­¦ä¹ æ¨¡å¼ *****/
    // å¦‚æœ force ä¸º trueï¼Œåˆ™é‡æ–°ç”Ÿæˆä¸€è½®å•è¯ï¼Œå¦åˆ™å¦‚æœ currentWords éç©ºä¿æŒä¸å˜
    function renderLearnGrid(force = false) {
      if (force || currentWords.length === 0) {
        currentWords = getRandomWords(16, prevRoundWords);
        updateRoundsCount();
      }
      const learnGrid = document.getElementById("learn-grid");
      learnGrid.innerHTML = "";
      currentWords.forEach((word, index) => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.index = index;
        card.innerHTML = `<strong>${word.eng}</strong><br>${word.cn}`;
        // æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œåˆ‡æ¢é€‰ä¸­çŠ¶æ€
        card.addEventListener("click", function() {
          card.classList.toggle("selected-card");
        });
        learnGrid.appendChild(card);
      });
      // æ›´æ–° prevRoundWordsï¼šè‹¥å…¨å¯¹åˆ™å®Œå…¨æ’é™¤ï¼Œå¦åˆ™å…è®¸æœ€å¤š3ä¸ªé”™è¯¯å•è¯ä¿ç•™
      if (Object.keys(globalErrors).length === 0) {
        prevRoundWords = new Set(currentWords.map(w => w.eng));
      } else {
        let allowed = new Set(Object.keys(globalErrors).slice(0, Math.min(3, Object.keys(globalErrors).length)));
        prevRoundWords = new Set(currentWords.map(w => w.eng).filter(eng => !allowed.has(eng)));
      }
    }
    
    // åˆ·æ–°å•è¯ï¼šå¦‚æœæœ‰é€‰ä¸­çš„å¡ç‰‡ï¼Œåˆ™åªåˆ·æ–°è¿™äº›ï¼Œå¦åˆ™åˆ·æ–°å…¨éƒ¨
    function refreshSelectedWords() {
      const selectedCards = document.querySelectorAll("#learn-grid .card.selected-card");
      if (selectedCards.length === 0) {
        // æ— é€‰ä¸­ï¼Œåˆ™åˆ·æ–°å…¨éƒ¨
        renderLearnGrid(true);
      } else {
        selectedCards.forEach(card => {
          const index = parseInt(card.dataset.index, 10);
          // æ’é™¤å½“å‰å…¶ä»–å•è¯
          const otherWords = currentWords.filter((w, i) => i !== index).map(w => w.eng);
          let available = wordList.filter(w => !otherWords.includes(w.eng));
          available.sort(() => 0.5 - Math.random());
          const newWord = available[0];
          // æ›´æ–°å…¨å±€ currentWords
          currentWords[index] = newWord;
          // æ›´æ–°å¡ç‰‡å†…å®¹ï¼Œå¹¶å–æ¶ˆé€‰ä¸­çŠ¶æ€
          card.innerHTML = `<strong>${newWord.eng}</strong><br>${newWord.cn}`;
          card.classList.remove("selected-card");
        });
      }
    }
    
    /***** å•è¯æ¶ˆæ¶ˆä¹ *****/
    function renderGameGrid() {
      const gameGrid = document.getElementById("game-grid");
      gameGrid.innerHTML = "";
      if (savedGameState) {
        gameCards = savedGameState;
      } else {
        gameCards = [];
        currentWords.forEach(word => {
          gameCards.push({eng: word.eng, cn: word.cn, type: "eng", matched: false});
          gameCards.push({eng: word.eng, cn: word.cn, type: "cn", matched: false});
        });
        gameCards.sort(() => 0.5 - Math.random());
      }
      gameCards.forEach((cardData, index) => {
        const card = document.createElement("div");
        card.className = "card";
        if (cardData.matched) { card.classList.add("matched"); }
        card.dataset.index = index;
        card.dataset.eng = cardData.eng;
        card.dataset.cn = cardData.cn;
        card.dataset.type = cardData.type;
        card.innerHTML = (cardData.type === "eng" ? cardData.eng : cardData.cn);
        card.addEventListener("click", () => handleCardClick(card));
        gameGrid.appendChild(card);
      });
    }
    
    function handleCardClick(card) {
      if (!firstCard) {
        firstCard = card;
        card.style.borderColor = "#007bff";
      } else {
        if (card === firstCard) return;
        if (firstCard.dataset.eng === card.dataset.eng && firstCard.dataset.type !== card.dataset.type) {
          const idx1 = parseInt(firstCard.dataset.index, 10);
          const idx2 = parseInt(card.dataset.index, 10);
          gameCards[idx1].matched = true;
          gameCards[idx2].matched = true;
          removeGlobalError(firstCard.dataset.eng);
          firstCard.classList.add("matched");
          card.classList.add("matched");
          firstCard = null;
          checkGameCompletion();
        } else {
          errorWords[firstCard.dataset.eng] = firstCard.dataset.cn;
          errorWords[card.dataset.eng] = card.dataset.cn;
          globalErrors[firstCard.dataset.eng] = firstCard.dataset.cn;
          globalErrors[card.dataset.eng] = card.dataset.cn;
          firstCard.style.borderColor = "#dc3545";
          card.style.borderColor = "#dc3545";
          setTimeout(() => {
            if (firstCard) firstCard.style.borderColor = "#ccc";
            card.style.borderColor = "#ccc";
            firstCard = null;
          }, 500);
        }
      }
    }
    
    function checkGameCompletion() {
      const allMatched = gameCards.every(c => c.matched);
      if (allMatched) {
        savedGameState = gameCards;
        showGameEndSection();
      }
    }
    
    function showGameEndSection() {
      document.getElementById("game-instructions").classList.add("hidden");
      const errorDiv = document.getElementById("game-errors");
      errorDiv.innerHTML = "";
      if (Object.keys(errorWords).length === 0) {
        errorDiv.innerHTML = "Congratulationsï¼è¯·ç»§ç»­æ¸¸æˆï½";
      } else {
        for (let eng in errorWords) {
          errorDiv.innerHTML += `${eng} - ${errorWords[eng]}<br>`;
        }
      }
      document.getElementById("game-end-section").classList.remove("hidden");
      document.getElementById("game-controls").style.display = "none";
      document.getElementById("next-level-btn").onclick = () => {
        document.getElementById("game-mode").classList.add("hidden");
        document.getElementById("puzzle-mode").classList.remove("hidden");
        puzzleIndex = 0;
        puzzleErrors = {};
        puzzleCount = 0;
        document.getElementById("puzzle-message").textContent = "";
        document.getElementById("puzzle-counter").textContent = "å·²ç»ƒä¹ å•è¯ï¼š0";
        document.getElementById("puzzle-counter").style.display = "block";
        document.getElementById("puzzle-end-section").classList.add("hidden");
        renderPuzzle();
      };
    }
    
    /***** å•è¯æ‹¼æ‹¼ä¹ *****/
    function splitWord(word) {
      let parts = [];
      if (word.length <= 4) {
        parts = word.split('');
      } else if (word.length <= 6) {
        const mid = Math.floor(word.length / 2);
        parts.push(word.slice(0, mid));
        parts.push(word.slice(mid));
      } else {
        parts.push(word.slice(0, 2));
        parts.push(word.slice(2, word.length - 2));
        parts.push(word.slice(word.length - 2));
      }
      return parts;
    }
    
    function renderPuzzle() {
      const puzzleArea = document.getElementById("puzzle-area");
      puzzleArea.innerHTML = "";
      if (puzzleIndex >= currentWords.length) {
        showPuzzleEndSection();
        return;
      }
      const currentWord = currentWords[puzzleIndex];
      const parts = splitWord(currentWord.eng);
      parts.sort(() => 0.5 - Math.random());
      const instruction = document.createElement("p");
      instruction.textContent = `è¯·æ ¹æ®ä¸­æ–‡æç¤ºï¼Œæ‹¼å‡ºå•è¯ï¼ˆä¸­æ–‡æç¤ºï¼š${currentWord.cn}ï¼‰`;
      puzzleArea.appendChild(instruction);
      
      const answerDiv = document.createElement("div");
      answerDiv.id = "puzzle-answer";
      answerDiv.style.minHeight = "30px";
      answerDiv.style.margin = "10px";
      puzzleArea.appendChild(answerDiv);
      
      const partsDiv = document.createElement("div");
      partsDiv.className = "puzzle-parts";
      parts.forEach(part => {
        const partBtn = document.createElement("button");
        partBtn.className = "puzzle-part";
        partBtn.textContent = part;
        partBtn.addEventListener("click", () => {
          const span = document.createElement("span");
          span.textContent = part;
          span.style.marginRight = "5px";
          answerDiv.appendChild(span);
          partBtn.disabled = true;
          partBtn.classList.add("selected-part");
          if (answerDiv.childNodes.length === parts.length) {
            let assembled = "";
            answerDiv.childNodes.forEach(node => assembled += node.textContent);
            const msgDiv = document.getElementById("puzzle-message");
            if (assembled === currentWord.eng) {
              msgDiv.textContent = "æ­£ç¡®";
              msgDiv.style.color = "green";
              removeGlobalError(currentWord.eng);
            } else {
              msgDiv.textContent = "é”™è¯¯";
              msgDiv.style.color = "red";
              puzzleErrors[currentWord.eng] = currentWord.cn;
              globalErrors[currentWord.eng] = currentWord.cn;
            }
            puzzleCount++;
            document.getElementById("puzzle-counter").textContent = `å·²ç»ƒä¹ å•è¯ï¼š${puzzleCount}`;
            setTimeout(() => {
              msgDiv.textContent = "";
              puzzleIndex++;
              renderPuzzle();
            }, 1000);
          }
        });
        partsDiv.appendChild(partBtn);
      });
      puzzleArea.appendChild(partsDiv);
      document.getElementById("puzzle-counter").textContent = `å·²ç»ƒä¹ å•è¯ï¼š${puzzleCount}`;
      document.getElementById("puzzle-counter").style.display = "block";
    }
    
    function showPuzzleEndSection() {
      document.getElementById("puzzle-counter").style.display = "none";
      const puzzleErrorsDiv = document.getElementById("puzzle-errors");
      let html = "";
      if (Object.keys(puzzleErrors).length === 0) {
        html = "æ‹¼å†™å…¨éƒ¨æ­£ç¡®ï¼Œå†æ¥å†å‰ï½";
      } else {
        for (let eng in puzzleErrors) {
          html += `${eng} - ${puzzleErrors[eng]}<br>`;
        }
      }
      puzzleErrorsDiv.innerHTML = html;
      document.getElementById("puzzle-end-section").classList.remove("hidden");
      document.getElementById("back-to-learn-btn3b").onclick = switchToLearnMode;
      document.getElementById("continue-listening-btn").onclick = () => {
        document.getElementById("puzzle-mode").classList.add("hidden");
        document.getElementById("listening-mode").classList.remove("hidden");
        listeningIndex = 0;
        totalListening = 0;
        listeningErrors = {};
        document.getElementById("listening-end-section").classList.add("hidden");
        document.getElementById("listening-counter").textContent = "å·²ç»ƒä¹ å•è¯ï¼š0";
        renderListening();
      };
    }
    
    /***** å•è¯å¬å¬ä¹ *****/
    function speakWord(word) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(word);
        window.speechSynthesis.speak(utterance);
      }
    }
    
    function getSimilarWord(word) {
      if (word.length < 3) return word;
      const index = Math.floor(Math.random() * word.length);
      let similar = word.slice(0, index) + word.slice(index + 1);
      if (similar === word) similar = word + "a";
      return similar;
    }
    
    function renderListening() {
      const listeningArea = document.getElementById("listening-area");
      listeningArea.innerHTML = "";
      if (listeningIndex >= currentWords.length) {
        showListeningEndSection();
        return;
      }
      const currentWord = currentWords[listeningIndex];
      
      // ä¿¡æ¯åŒºåŸŸï¼šæ˜¾ç¤ºæç¤ºï¼ˆä¿æŒä¸å˜ï¼‰
      const infoDiv = document.createElement("div");
      infoDiv.id = "listening-info";
      infoDiv.style.display = "flex";
      infoDiv.style.flexDirection = "column";
      infoDiv.style.alignItems = "center";
      infoDiv.style.gap = "5px";
      
      const speakerBtn = document.createElement("button");
      speakerBtn.className = "speaker";
      speakerBtn.textContent = "ğŸ”Š";
      speakerBtn.onclick = () => { speakWord(currentWord.eng); };
      infoDiv.appendChild(speakerBtn);
      
      const hiddenWordDiv = document.createElement("div");
      hiddenWordDiv.className = "hidden-word";
      hiddenWordDiv.textContent = currentWord.eng;
      infoDiv.appendChild(hiddenWordDiv);
      
      const promptDiv = document.createElement("div");
      promptDiv.id = "listening-instructions";
      promptDiv.textContent = `ä¸­æ–‡æç¤ºï¼š${currentWord.cn}`;
      infoDiv.appendChild(promptDiv);
      
      listeningArea.appendChild(infoDiv);
      
      // é€‰é¡¹åŒºåŸŸï¼šç”Ÿæˆä¸¤ä¸ªéšæœºæ’åˆ—æŒ‰é’®
      const optionsArea = document.createElement("div");
      optionsArea.id = "options-area";
      optionsArea.style.marginTop = "10px";
      
      const correctBtn = document.createElement("button");
      correctBtn.className = "option-btn";
      correctBtn.textContent = currentWord.eng;
      correctBtn.onclick = () => {
        correctBtn.style.backgroundColor = "#d4edda";
        removeGlobalError(currentWord.eng);
        listeningIndex++;
        totalListening++;
        document.getElementById("listening-counter").textContent = `å·²ç»ƒä¹ å•è¯ï¼š${totalListening}`;
        setTimeout(renderListening, 800);
      };
      
      const similarBtn = document.createElement("button");
      similarBtn.className = "option-btn";
      const sim = getSimilarWord(currentWord.eng);
      similarBtn.textContent = sim;
      similarBtn.onclick = () => {
        similarBtn.style.backgroundColor = "#f8d7da";
        listeningErrors[currentWord.eng] = currentWord.cn;
        globalErrors[currentWord.eng] = currentWord.cn;
        listeningIndex++;
        totalListening++;
        document.getElementById("listening-counter").textContent = `å·²ç»ƒä¹ å•è¯ï¼š${totalListening}`;
        setTimeout(renderListening, 800);
      };
      
      let btnArray = [correctBtn, similarBtn];
      btnArray.sort(() => 0.5 - Math.random());
      btnArray.forEach(btn => optionsArea.appendChild(btn));
      
      listeningArea.appendChild(optionsArea);
      
      document.getElementById("listening-counter").textContent = `å·²ç»ƒä¹ å•è¯ï¼š${totalListening}`;
      document.getElementById("listening-counter").style.display = "block";
    }
    
    function showListeningEndSection() {
      const listeningErrorsDiv = document.getElementById("listening-errors");
      let html = "";
      if (Object.keys(listeningErrors).length === 0) {
        html = "å¬è¾¨å®Œå…¨æ­£ç¡®ï¼Œè¯·å¼€å§‹æ–°ä¸€è½®æŒ‘æˆ˜ï¼";
      } else {
        for (let eng in listeningErrors) {
          html += `${eng} - ${listeningErrors[eng]}<br>`;
        }
      }
      listeningErrorsDiv.innerHTML = html;
      document.getElementById("listening-end-section").classList.remove("hidden");
      // éšè—æç¤ºå’Œè®¡æ•°åŒºåŸŸ
      document.getElementById("listening-instructions").style.display = "none";
      document.getElementById("listening-counter").style.display = "none";
    }
    
    /***** é¡µé¢åˆ‡æ¢ *****/
    function switchToLearnMode() {
      // è¿”å›å­¦ä¹ æ¨¡å¼ï¼šæ¸…ç©ºæœ¬è½®çŠ¶æ€å¹¶åˆ·æ–°æ–°å•è¯
      savedGameState = null;
      gamePaused = false;
      currentWords = [];
      errorWords = {};
      globalErrors = {};
      puzzleIndex = 0;
      puzzleErrors = {};
      puzzleCount = 0;
      listeningIndex = 0;
      listeningErrors = {};
      totalListening = 0;
      document.getElementById("learning-mode").classList.remove("hidden");
      document.getElementById("game-mode").classList.add("hidden");
      document.getElementById("puzzle-mode").classList.add("hidden");
      document.getElementById("listening-mode").classList.add("hidden");
      renderLearnGrid(true);
    }
    
    /***** äº‹ä»¶ç»‘å®š *****/
    document.addEventListener("DOMContentLoaded", () => {
      // é»˜è®¤æ˜¾ç¤ºå­¦ä¹ æ¨¡å¼åŠ16å¼ å¡ç‰‡
      renderLearnGrid(true);
    });
    document.getElementById("refresh-btn").addEventListener("click", () => {
      // åˆ·æ–°æŒ‰é’®ï¼šåˆ·æ–°é€‰ä¸­å¡ç‰‡ï¼Œå¦‚æœæ— é€‰ä¸­åˆ™åˆ·æ–°æ‰€æœ‰
      refreshSelectedWords();
    });
    document.getElementById("start-game-btn").addEventListener("click", () => {
      gamePaused = false;
      errorWords = {};
      savedGameState = null;
      document.getElementById("learning-mode").classList.add("hidden");
      document.getElementById("game-mode").classList.remove("hidden");
      document.getElementById("game-instructions").classList.remove("hidden");
      document.getElementById("game-end-section").classList.add("hidden");
      document.getElementById("game-controls").style.display = "block";
      renderGameGrid();
    });
    // å·²ç§»é™¤â€œç»§ç»­æ¸¸æˆâ€æŒ‰é’®äº‹ä»¶
    document.getElementById("back-to-learn-btn").addEventListener("click", switchToLearnMode);
    document.getElementById("back-to-learn-btn2").addEventListener("click", switchToLearnMode);
    document.getElementById("back-to-learn-btn3b").addEventListener("click", switchToLearnMode);
    // â€œå¼€å¯æ–°ä¸€è½®æŒ‘æˆ˜â€æŒ‰é’®åœ¨å¬å¬ä¹ç»“æŸåŒºåŸŸå·²ç”¨ inline onclick è°ƒç”¨ switchToLearnMode()
    
    document.getElementById("next-level-btn").onclick = () => {
      document.getElementById("game-mode").classList.add("hidden");
      document.getElementById("puzzle-mode").classList.remove("hidden");
      puzzleIndex = 0;
      puzzleErrors = {};
      puzzleCount = 0;
      document.getElementById("puzzle-message").textContent = "";
      document.getElementById("puzzle-counter").textContent = "å·²ç»ƒä¹ å•è¯ï¼š0";
      document.getElementById("puzzle-counter").style.display = "block";
      document.getElementById("puzzle-end-section").classList.add("hidden");
      renderPuzzle();
    };
    
    document.getElementById("continue-listening-btn").addEventListener("click", () => {
      document.getElementById("puzzle-mode").classList.add("hidden");
      document.getElementById("listening-mode").classList.remove("hidden");
      listeningIndex = 0;
      totalListening = 0;
      listeningErrors = {};
      document.getElementById("listening-end-section").classList.add("hidden");
      document.getElementById("listening-counter").textContent = "å·²ç»ƒä¹ å•è¯ï¼š0";
      document.getElementById("listening-counter").style.display = "block";
      document.getElementById("listening-instructions").style.display = "block";
      renderListening();
    });
  </script>
</body>
</html>
